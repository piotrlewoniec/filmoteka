{"mappings":"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","sources":["src/js/system/localstorage.js","src/js/my-library-localStorage.js","src/js/config/mvmylibdemo.js"],"sourcesContent":["export const localStorageSave = (key, value) => {\n  try {\n    const serializedState = JSON.stringify(value);\n    localStorage.setItem(key, serializedState);\n  } catch (error) {\n    console.error('Set state error: ', error.message);\n  }\n};\n\nexport const localStorageLoad = key => {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error('Get state error: ', error.message);\n  }\n};\n","import { localStorageSave, localStorageLoad } from './system/localstorage';\nimport { renderMoviePlaceholder } from './ui/noApi';\nimport { axiosGetData } from './apirest/axiosGetData';\nimport {\n  defaultHeaderGet,\n  searchMovieDetailsUrl,\n  searchMovieDetailsParams,\n} from './config/stdquery';\nimport { apikeyTMDB } from './config/apikey';\nimport { renderMovieList } from './ui/cardgen';\nimport { setPagination } from './ui/pagination';\n\nimport { mvmylibdemo } from './config/mvmylibdemo';\nlocalStorageSave('mvmylib', mvmylibdemo);\n\nconst movieListContainer = document.querySelector('.movie-list-container');\nconst paginationContainer = document.querySelector('.pagination');\nconst btnWatched = document.querySelector('#watched');\nconst btnQueue = document.querySelector('#queue');\n\nbtnWatched.addEventListener('click', () => {\n  loadFromStorage('watched');\n});\nbtnQueue.addEventListener('click', () => {\n  loadFromStorage('queue');\n});\n\nasync function loadFromStorage(movieInLib) {\n  if ('mvmylib' in localStorage) {\n    const mvmylibLocal = localStorageLoad('mvmylib');\n    let mvmylibToDisplay = [];\n    if (movieInLib === 'watched') {\n      mvmylibToDisplay = mvmylibLocal.filter(movie => movie.watched);\n    } else if (movieInLib === 'queue') {\n      mvmylibToDisplay = mvmylibLocal.filter(movie => movie.queue);\n    }\n    if (mvmylibToDisplay.length === 0) {\n      renderMoviePlaceholder(movieListContainer);\n      return;\n    }\n    const arrayOfPromises = mvmylibToDisplay.map(async movie => {\n      const header = { ...defaultHeaderGet, ...searchMovieDetailsUrl };\n      header.url = `${movie.movieid}`;\n      const parameters = { ...searchMovieDetailsParams, api_key: apikeyTMDB };\n      const response = await axiosGetData(header, parameters);\n      return response;\n    });\n    let serverData = await Promise.all(arrayOfPromises);\n    for (let element of serverData) {\n      element.data.genre_ids = element.data.genres.map(genre => genre.id);\n    }\n    const movies = serverData.map(data => data.data);\n    renderMovieList(movieListContainer, movies);\n    // console.log(movies);\n    /*\n    setPagination({\n      headerRef: data.header,\n      parametersRef: data.parameters,\n      movieListContainer: movieListContainer,\n      paginationContainerRef: paginationContainer,\n      currentPageRef: data.movies.data.page,\n      totalPagesRef: data.movies.data.total_pages,\n    });\n    */\n  }\n}\n\nif ('mvmylib' in localStorage) {\n  loadFromStorage('watched');\n} else {\n  renderMoviePlaceholder(movieListContainer);\n}\n","export const mvmylibdemo = [\n  { movieid: 385687, watched: true, queue: false },\n  { movieid: 569094, watched: true, queue: false },\n  { movieid: 667538, watched: true, queue: false },\n  { movieid: 562094, watched: true, queue: false },\n\n  { movieid: 385687, watched: true, queue: false },\n  { movieid: 569094, watched: true, queue: false },\n  { movieid: 667538, watched: true, queue: false },\n  { movieid: 562094, watched: true, queue: false },\n\n  { movieid: 385687, watched: true, queue: false },\n  { movieid: 569094, watched: true, queue: false },\n  { movieid: 667538, watched: true, queue: false },\n  { movieid: 562094, watched: true, queue: false },\n\n  { movieid: 385687, watched: true, queue: false },\n  { movieid: 569094, watched: true, queue: false },\n  { movieid: 667538, watched: true, queue: false },\n  { movieid: 562094, watched: true, queue: false },\n\n  { movieid: 385687, watched: true, queue: false },\n  { movieid: 569094, watched: true, queue: false },\n  { movieid: 667538, watched: true, queue: false },\n  { movieid: 562094, watched: true, queue: false },\n\n  { movieid: 385687, watched: true, queue: false },\n  { movieid: 569094, watched: true, queue: false },\n  { movieid: 667538, watched: true, queue: false },\n  { movieid: 562094, watched: true, queue: false },\n\n  { movieid: 1010581, watched: false, queue: true },\n  { movieid: 298618, watched: false, queue: true },\n  { movieid: 502356, watched: false, queue: true },\n];\n"],"names":["$1f81484036023caf$export$b21afb0f1a9e5e6","key","serializedState","localStorage","getItem","undefined","JSON","parse","error","console","message","value","stringify","setItem","movieid","watched","queue","$46cc727d38dec068$var$movieListContainer","document","querySelector","$46cc727d38dec068$var$btnWatched","$46cc727d38dec068$var$btnQueue","async","$46cc727d38dec068$var$loadFromStorage","movieInLib","mvmylibLocal","mvmylibToDisplay","filter","movie","length","$3PnVH","renderMoviePlaceholder","arrayOfPromises","map","header","$3A25W","defaultHeaderGet","searchMovieDetailsUrl","url","parameters","searchMovieDetailsParams","api_key","$a0S8g","apikeyTMDB","$8hXaC","axiosGetData","serverData","Promise","all","element","data","genre_ids","genres","genre","id","movies","$caO0w","renderMovieList","addEventListener"],"version":3,"file":"my-library.ea67a0e2.js.map"}
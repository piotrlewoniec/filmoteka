{"mappings":"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","sources":["src/js/system/localstorage.js","src/js/my-library.js"],"sourcesContent":["export const localStorageSave = (key, value) => {\n  try {\n    const serializedState = JSON.stringify(value);\n    localStorage.setItem(key, serializedState);\n  } catch (error) {\n    console.error('Set state error: ', error.message);\n  }\n};\n\nexport const localStorageLoad = key => {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error('Get state error: ', error.message);\n  }\n};\n","import { localStorageSave, localStorageLoad } from './system/localstorage';\nimport { renderMoviePlaceholder } from './ui/noApi';\nimport { axiosGetData } from './apirest/axiosGetData';\nimport {\n  defaultHeaderGet,\n  searchMovieDetailsUrl,\n  searchMovieDetailsParams,\n} from './config/stdquery';\nimport { apikeyTMDB } from './config/apikey';\nimport { renderMovieList } from './ui/cardgen';\nimport { setPagination } from './ui/pagination';\n\nconst movieListContainer = document.querySelector('.movie-list-container');\nconst paginationContainer = document.querySelector('.pagination');\nconst btnWatched = document.querySelector('#watched');\nconst btnQueue = document.querySelector('#queue');\n\nbtnWatched.addEventListener('click', () => {\n  loadFromStorage('watched');\n});\nbtnQueue.addEventListener('click', () => {\n  loadFromStorage('queue');\n});\n\nconst mvmylib = [\n  { movieid: 385687, watched: true, queue: false },\n  { movieid: 569094, watched: true, queue: false },\n  { movieid: 667538, watched: true, queue: false },\n  { movieid: 562094, watched: true, queue: false },\n\n  { movieid: 385687, watched: true, queue: false },\n  { movieid: 569094, watched: true, queue: false },\n  { movieid: 667538, watched: true, queue: false },\n  { movieid: 562094, watched: true, queue: false },\n\n  { movieid: 385687, watched: true, queue: false },\n  { movieid: 569094, watched: true, queue: false },\n  { movieid: 667538, watched: true, queue: false },\n  { movieid: 562094, watched: true, queue: false },\n\n  { movieid: 385687, watched: true, queue: false },\n  { movieid: 569094, watched: true, queue: false },\n  { movieid: 667538, watched: true, queue: false },\n  { movieid: 562094, watched: true, queue: false },\n\n  { movieid: 385687, watched: true, queue: false },\n  { movieid: 569094, watched: true, queue: false },\n  { movieid: 667538, watched: true, queue: false },\n  { movieid: 562094, watched: true, queue: false },\n\n  { movieid: 385687, watched: true, queue: false },\n  { movieid: 569094, watched: true, queue: false },\n  { movieid: 667538, watched: true, queue: false },\n  { movieid: 562094, watched: true, queue: false },\n\n  { movieid: 1010581, watched: false, queue: true },\n  { movieid: 298618, watched: false, queue: true },\n  { movieid: 502356, watched: false, queue: true },\n];\n\nlocalStorageSave('mvmylib', mvmylib);\n\nasync function loadFromStorage(movieInLib) {\n  if ('mvmylib' in localStorage) {\n    const mvmylibLocal = localStorageLoad('mvmylib');\n    let mvmylibToDisplay = [];\n    if (movieInLib === 'watched') {\n      mvmylibToDisplay = mvmylibLocal.filter(movie => movie.watched);\n    } else if (movieInLib === 'queue') {\n      mvmylibToDisplay = mvmylibLocal.filter(movie => movie.queue);\n    }\n    if (mvmylibToDisplay.length === 0) {\n      renderMoviePlaceholder(movieListContainer);\n      return;\n    }\n    const arrayOfPromises = mvmylibToDisplay.map(async movie => {\n      const header = { ...defaultHeaderGet, ...searchMovieDetailsUrl };\n      header.url = `${movie.movieid}`;\n      const parameters = { ...searchMovieDetailsParams, api_key: apikeyTMDB };\n      const response = await axiosGetData(header, parameters);\n      return response;\n    });\n    let serverData = await Promise.all(arrayOfPromises);\n    for (let element of serverData) {\n      element.data.genre_ids = element.data.genres.map(genre => genre.id);\n    }\n    const movies = serverData.map(data => data.data);\n    renderMovieList(movieListContainer, movies);\n    console.log(movies);\n    /*\n    setPagination({\n      headerRef: data.header,\n      parametersRef: data.parameters,\n      movieListContainer: movieListContainer,\n      paginationContainerRef: paginationContainer,\n      currentPageRef: data.movies.data.page,\n      totalPagesRef: data.movies.data.total_pages,\n    });\n    */\n  }\n}\n\nif ('mvmylib' in localStorage) {\n  loadFromStorage('watched');\n} else {\n  renderMoviePlaceholder(movieListContainer);\n}\n"],"names":["$1f81484036023caf$export$b21afb0f1a9e5e6","key","serializedState","localStorage","getItem","undefined","JSON","parse","error","console","message","$df7ae32686cb4a06$var$movieListContainer","document","querySelector","$df7ae32686cb4a06$var$btnWatched","$df7ae32686cb4a06$var$btnQueue","addEventListener","$df7ae32686cb4a06$var$loadFromStorage","async","movieInLib","mvmylibLocal","mvmylibToDisplay","filter","movie","watched","queue","length","$3PnVH","renderMoviePlaceholder","arrayOfPromises","map","header","$3A25W","defaultHeaderGet","searchMovieDetailsUrl","url","movieid","parameters","searchMovieDetailsParams","api_key","$a0S8g","apikeyTMDB","$8hXaC","axiosGetData","serverData","Promise","all","element","data","genre_ids","genres","genre","id","movies","$caO0w","renderMovieList","log","value","stringify","setItem"],"version":3,"file":"my-library.e188e151.js.map"}